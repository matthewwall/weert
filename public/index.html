<!DOCTYPE html>
<html lang="en">
<head>
    <title>Welcome to WeeRT</title>
    <meta content="en-us" http-equiv="Content-Language"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <link href="/stylesheets/weewx.css" rel="stylesheet"/>
    <link href='/stylesheets/style.css' rel='stylesheet'/>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js' type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.3/handlebars.js"
            type="text/javascript"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/async/1.4.2/async.min.js' type="text/javascript"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js'
            type="text/javascript"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.js' type="text/javascript"></script>
    <script src='javascripts/timeplot.js' type="text/javascript"></script>
    <script src='javascripts/main.js' type="text/javascript"></script>
</head>
<body>

<script id="packet-template" type="text/x-handlebars-template">
    <div class="stats" style="width:50%">
        <div class="stats_header">
            Current Conditions
        </div>
        <table>
            <tr>
                <td class="stats_label">Time:</td>
                <td class="stats_data">{{formatTimeStamp dateTime}}</td>
            </tr>
            <tr>
                <td class="stats_label">Outside temperature</td>
                <td class="stats_data">{{outTemp}}</td>
            </tr>
            <tr>
                <td class="stats_label">Outside humidity</td>
                <td class="stats_data">{{outHumidity}}</td>
            </tr>
            <tr>
                <td class="stats_label">Inside temperature</td>
                <td class="stats_data">{{inTemp}}</td>
            </tr>
            <tr>
                <td class="stats_label">Wind speed / direction</td>
                <td class="stats_data">{{windSpeed}} @ {{windDir}}</td>
            </tr>
            <tr>
                <td class="stats_label">Barometer</td>
                <td class="stats_data">{{barometer}}</td>
            </tr>
        </table>
    </div>
</script>

<div id="container">

    <h1>Welcome to WeeRT</h1>

        <div id="packet-info"></div>
    <h2>Outside Temperature</h2>

    <svg id="chartarea"></svg>

    <h2>Architecture</h2>
    <ul>
        <li>Uses a Node server with the Express framework;</li>
        <li>The server receives packet updates from weewx via a RESTful interface;</li>
        <li>The packets are stored in a MongoDB server;</li>
        <li>The server sends new packets to any interested clients via a websocket connection;</li>
        <li>The client plots the real-time updates using D3 and Handlebars.</li>
    </ul>
</div>
</body>
</html>